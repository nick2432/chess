{"version":3,"file":"ngx-drag-drop.mjs","sources":["../../../projects/dnd/src/lib/dnd-utils.ts","../../../projects/dnd/src/lib/dnd-state.ts","../../../projects/dnd/src/lib/dnd-draggable.directive.ts","../../../projects/dnd/src/lib/dnd-dropzone.directive.ts","../../../projects/dnd/src/lib/dnd-handle.directive.ts","../../../projects/dnd/src/lib/dnd.module.ts","../../../projects/dnd/src/public-api.ts","../../../projects/dnd/src/ngx-drag-drop.ts"],"sourcesContent":["import { DropEffect, EffectAllowed } from \"./dnd-types\";\n\nexport interface DragDropData {\n  data?:any;\n  type?:string;\n}\n\nexport interface DndEvent extends DragEvent {\n  _dndUsingHandle?:boolean;\n  _dndDropzoneActive?:true;\n}\n\nexport type DndDragImageOffsetFunction = ( event:DragEvent, dragImage:Element ) => { x:number, y:number };\n\nexport const DROP_EFFECTS = [ \"move\", \"copy\", \"link\" ] as DropEffect[];\n\nexport const CUSTOM_MIME_TYPE = \"application/x-dnd\";\nexport const JSON_MIME_TYPE = \"application/json\";\nexport const MSIE_MIME_TYPE = \"Text\";\n\nfunction mimeTypeIsCustom( mimeType:string ) {\n\n  return mimeType.substr( 0, CUSTOM_MIME_TYPE.length ) === CUSTOM_MIME_TYPE;\n}\n\nexport function getWellKnownMimeType( event:DragEvent ):string | null {\n\n  if( event.dataTransfer ) {\n\n    const types = event.dataTransfer.types;\n\n    // IE 9 workaround.\n    if( !types ) {\n\n      return MSIE_MIME_TYPE;\n    }\n\n    for( let i = 0; i < types.length; i++ ) {\n\n      if( types[ i ] === MSIE_MIME_TYPE\n        || types[ i ] === JSON_MIME_TYPE\n        || mimeTypeIsCustom( types[ i ] ) ) {\n\n        return types[ i ];\n      }\n    }\n  }\n\n  return null;\n}\n\nexport function setDragData( event:DragEvent, data:DragDropData, effectAllowed:EffectAllowed ):void {\n\n  // Internet Explorer and Microsoft Edge don't support custom mime types, see design doc:\n  // https://github.com/marceljuenemann/angular-drag-and-drop-lists/wiki/Data-Transfer-Design\n  const mimeType = CUSTOM_MIME_TYPE + (data.type ? (\"-\" + data.type) : \"\");\n\n  const dataString = JSON.stringify( data );\n\n  try {\n\n    event.dataTransfer?.setData( mimeType, dataString );\n\n  }\n  catch( e ) {\n\n    //   Setting a custom MIME type did not work, we are probably in IE or Edge.\n    try {\n\n      event.dataTransfer?.setData( JSON_MIME_TYPE, dataString );\n\n    }\n    catch( e ) {\n\n      //   We are in Internet Explorer and can only use the Text MIME type. Also note that IE\n      //   does not allow changing the cursor in the dragover event, therefore we have to choose\n      //   the one we want to display now by setting effectAllowed.\n      const effectsAllowed = filterEffects( DROP_EFFECTS, effectAllowed );\n      if(event.dataTransfer) {\n        event.dataTransfer.effectAllowed = effectsAllowed[ 0 ];\n      }\n\n      event.dataTransfer?.setData( MSIE_MIME_TYPE, dataString );\n    }\n  }\n}\n\nexport function getDropData( event:DragEvent, dragIsExternal:boolean ):DragDropData {\n\n  // check if the mime type is well known\n  const mimeType = getWellKnownMimeType( event );\n\n  // drag did not originate from [dndDraggable]\n  if( dragIsExternal === true ) {\n\n    if( mimeType !== null\n      && mimeTypeIsCustom( mimeType ) ) {\n\n      // the type of content is well known and safe to handle\n      return JSON.parse( event.dataTransfer?.getData( mimeType ) ?? \"{}\" );\n    }\n\n    // the contained data is unknown, let user handle it\n    return {};\n  }\n\n  if(mimeType !== null) {\n    // the type of content is well known and safe to handle\n    return JSON.parse( event.dataTransfer?.getData( mimeType ) ?? \"{}\" );\n  }\n\n  // the contained data is unknown, let user handle it\n  return {};\n}\n\nexport function filterEffects( effects:DropEffect[], allowed:EffectAllowed | DropEffect ):DropEffect[] {\n\n  if( allowed === \"all\"\n    || allowed === \"uninitialized\" ) {\n\n    return effects;\n  }\n\n  return effects.filter( function( effect ) {\n\n    return allowed.toLowerCase().indexOf( effect ) !== -1;\n  } );\n}\n\nexport function getDirectChildElement( parentElement:Element, childElement:Element ):Element | null {\n\n  let directChild:Node = childElement;\n\n  while( directChild.parentNode !== parentElement ) {\n\n    // reached root node without finding given parent\n    if( !directChild.parentNode ) {\n\n      return null;\n    }\n\n    directChild = directChild.parentNode;\n  }\n\n  return directChild as Element;\n}\n\nexport function shouldPositionPlaceholderBeforeElement( event:DragEvent, element:Element, horizontal:boolean ) {\n\n  const bounds = element.getBoundingClientRect();\n\n  // If the pointer is in the upper half of the list item element,\n  // we position the placeholder before the list item, otherwise after it.\n  if( horizontal ) {\n\n    return (event.clientX < bounds.left + bounds.width / 2);\n  }\n\n  return (event.clientY < bounds.top + bounds.height / 2);\n}\n\nexport function calculateDragImageOffset( event:DragEvent, dragImage:Element ):{ x:number, y:number } {\n\n  const dragImageComputedStyle = window.getComputedStyle( dragImage );\n  const paddingTop = parseFloat( dragImageComputedStyle.paddingTop ) || 0;\n  const paddingLeft = parseFloat( dragImageComputedStyle.paddingLeft ) || 0;\n  const borderTop = parseFloat( dragImageComputedStyle.borderTopWidth ) || 0;\n  const borderLeft = parseFloat( dragImageComputedStyle.borderLeftWidth ) || 0;\n\n  return {\n    x: event.offsetX + paddingLeft + borderLeft,\n    y: event.offsetY + paddingTop + borderTop\n  };\n}\n\nexport function setDragImage( event:DragEvent, dragImage:Element, offsetFunction:DndDragImageOffsetFunction ):void {\n\n  const offset = offsetFunction( event, dragImage ) || {x: 0, y: 0};\n\n  (event.dataTransfer as any).setDragImage( dragImage, offset.x, offset.y );\n}\n","import {\n  CUSTOM_MIME_TYPE,\n  DROP_EFFECTS,\n  filterEffects,\n  getWellKnownMimeType,\n  JSON_MIME_TYPE,\n  MSIE_MIME_TYPE\n} from \"./dnd-utils\";\nimport { DropEffect, EffectAllowed } from \"./dnd-types\";\n\nexport interface DndState {\n  isDragging:boolean;\n  dropEffect?:DropEffect;\n  effectAllowed?:EffectAllowed;\n  type?:string;\n}\n\nconst _dndState:DndState = {\n  isDragging: false,\n  dropEffect: \"none\",\n  effectAllowed: \"all\",\n  type: undefined\n};\n\nexport function startDrag( event:DragEvent, effectAllowed:EffectAllowed, type:string | undefined ) {\n\n  _dndState.isDragging = true;\n  _dndState.dropEffect = \"none\";\n  _dndState.effectAllowed = effectAllowed;\n  _dndState.type = type;\n\n  if(event.dataTransfer) {\n\n    event.dataTransfer.effectAllowed = effectAllowed;\n  }\n}\n\nexport function endDrag() {\n\n  _dndState.isDragging = false;\n  _dndState.dropEffect = undefined;\n  _dndState.effectAllowed = undefined;\n  _dndState.type = undefined;\n}\n\nexport function setDropEffect( event:DragEvent, dropEffect:DropEffect ) {\n\n  if( _dndState.isDragging === true ) {\n\n    _dndState.dropEffect = dropEffect;\n  }\n\n  if(event.dataTransfer) {\n\n    event.dataTransfer.dropEffect = dropEffect;\n  }\n}\n\nexport function getDropEffect( event:DragEvent, effectAllowed?:EffectAllowed | DropEffect ):DropEffect {\n\n  const dataTransferEffectAllowed:EffectAllowed = (event.dataTransfer) ? event.dataTransfer.effectAllowed as EffectAllowed : \"uninitialized\";\n\n  let effects = filterEffects( DROP_EFFECTS, dataTransferEffectAllowed );\n\n  if( _dndState.isDragging === true ) {\n\n    effects = filterEffects( effects, _dndState.effectAllowed! );\n  }\n\n  if( effectAllowed ) {\n\n    effects = filterEffects( effects, effectAllowed );\n  }\n\n  // MacOS automatically filters dataTransfer.effectAllowed depending on the modifier keys,\n  // therefore the following modifier keys will only affect other operating systems.\n  if( effects.length === 0 ) {\n\n    return \"none\";\n  }\n\n  if( event.ctrlKey && effects.indexOf( \"copy\" ) !== -1 ) {\n\n    return \"copy\";\n  }\n\n  if( event.altKey && effects.indexOf( \"link\" ) !== -1 ) {\n\n    return \"link\";\n  }\n\n  return effects[ 0 ] as DropEffect;\n}\n\nexport function getDndType( event:DragEvent ):string | undefined {\n\n  if( _dndState.isDragging === true ) {\n\n    return _dndState.type;\n  }\n\n  const mimeType = getWellKnownMimeType( event );\n\n  if( mimeType === null ) {\n\n    return undefined;\n  }\n\n  if( mimeType === MSIE_MIME_TYPE\n    || mimeType === JSON_MIME_TYPE ) {\n\n    return undefined;\n  }\n\n  return mimeType.substr( CUSTOM_MIME_TYPE.length + 1 ) || undefined;\n}\n\nexport function isExternalDrag():boolean {\n\n  return _dndState.isDragging === false;\n}\n\nexport const dndState:Readonly<DndState> = _dndState as Readonly<DndState>;\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  HostBinding,\n  HostListener,\n  Inject,\n  Input,\n  NgZone,\n  OnDestroy,\n  Output,\n  Renderer2\n} from \"@angular/core\";\nimport { calculateDragImageOffset, DndDragImageOffsetFunction, DndEvent, setDragData, setDragImage } from \"./dnd-utils\";\nimport { DndHandleDirective } from \"./dnd-handle.directive\";\nimport { dndState, endDrag, startDrag } from \"./dnd-state\";\nimport { EffectAllowed } from \"./dnd-types\";\n\n@Directive( {\n  selector: \"[dndDragImageRef]\"\n} )\nexport class DndDragImageRefDirective {\n\n  constructor(@Inject(forwardRef(() => DndDraggableDirective)) parent: DndDraggableDirective, elementRef:ElementRef ) {\n    parent.registerDragImage( elementRef );\n  }\n}\n\n@Directive( {\n  selector: \"[dndDraggable]\"\n} )\nexport class DndDraggableDirective implements AfterViewInit, OnDestroy {\n\n  @Input()\n  dndDraggable:any;\n\n  @Input()\n  dndEffectAllowed:EffectAllowed = \"copy\";\n\n  @Input()\n  dndType?:string;\n\n  @Input()\n  dndDraggingClass = \"dndDragging\";\n\n  @Input()\n  dndDraggingSourceClass = \"dndDraggingSource\";\n\n  @Input()\n  dndDraggableDisabledClass = \"dndDraggableDisabled\";\n\n  @Input()\n  dndDragImageOffsetFunction:DndDragImageOffsetFunction = calculateDragImageOffset;\n\n  @Output()\n  readonly dndStart:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\n\n  @Output()\n  readonly dndDrag:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\n\n  @Output()\n  readonly dndEnd:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\n\n  @Output()\n  readonly dndMoved:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\n\n  @Output()\n  readonly dndCopied:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\n\n  @Output()\n  readonly dndLinked:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\n\n  @Output()\n  readonly dndCanceled:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\n\n  @HostBinding( \"attr.draggable\" )\n  draggable = true;\n\n  private dndHandle?:DndHandleDirective;\n\n  private dndDragImageElementRef?:ElementRef;\n\n  private dragImage:Element | undefined;\n\n  private isDragStarted:boolean = false;\n\n  private readonly dragEventHandler:( event:DragEvent ) => void = ( event:DragEvent ) => this.onDrag( event );\n\n  @Input()\n  set dndDisableIf( value:boolean ) {\n\n    this.draggable = !value;\n\n    if( this.draggable ) {\n\n      this.renderer.removeClass( this.elementRef.nativeElement, this.dndDraggableDisabledClass );\n    }\n    else {\n\n      this.renderer.addClass( this.elementRef.nativeElement, this.dndDraggableDisabledClass );\n    }\n  }\n\n  @Input()\n  set dndDisableDragIf( value:boolean ) {\n    this.dndDisableIf = value;\n  }\n\n  constructor( private elementRef:ElementRef,\n               private renderer:Renderer2,\n               private ngZone:NgZone ) {\n  }\n\n  ngAfterViewInit():void {\n    this.ngZone.runOutsideAngular( () => {\n      this.elementRef.nativeElement.addEventListener( \"drag\", this.dragEventHandler );\n    } );\n  }\n\n  ngOnDestroy():void {\n    this.elementRef.nativeElement.removeEventListener( \"drag\", this.dragEventHandler );\n    if(this.isDragStarted === true) {\n      endDrag()\n    }\n  }\n\n  @HostListener( \"dragstart\", [ \"$event\" ] )\n  onDragStart( event:DndEvent ): boolean {\n\n    if( this.draggable === false ) {\n\n      return false;\n    }\n\n    // check if there is dnd handle and if the dnd handle was used to start the drag\n    if( typeof this.dndHandle !== \"undefined\"\n      && typeof event._dndUsingHandle === \"undefined\" ) {\n\n      return false;\n    }\n\n    // initialize global state\n    startDrag( event, this.dndEffectAllowed, this.dndType );\n\n    this.isDragStarted = true;\n\n    setDragData( event, {data: this.dndDraggable, type: this.dndType}, dndState.effectAllowed! );\n\n    this.dragImage = this.determineDragImage();\n\n    // set dragging css class prior to setDragImage so styles are applied before\n    // TODO breaking change: add class to elementRef rather than drag image which could be another element\n    this.renderer.addClass( this.dragImage, this.dndDraggingClass );\n\n    // set custom dragimage if present\n    // set dragimage if drag is started from dndHandle\n    if( typeof this.dndDragImageElementRef !== \"undefined\"\n      || typeof event._dndUsingHandle !== \"undefined\" ) {\n\n      setDragImage( event, this.dragImage, this.dndDragImageOffsetFunction );\n    }\n\n    // add dragging source css class on first drag event\n    const unregister = this.renderer.listen( this.elementRef.nativeElement, \"drag\", () => {\n\n      this.renderer.addClass( this.elementRef.nativeElement, this.dndDraggingSourceClass );\n      unregister();\n    } );\n\n    this.dndStart.emit( event );\n\n    event.stopPropagation();\n    return true;\n  }\n\n  onDrag( event:DragEvent ) {\n\n    this.dndDrag.emit( event );\n  }\n\n  @HostListener( \"dragend\", [ \"$event\" ] )\n  onDragEnd( event:DragEvent ) {\n\n    // get drop effect from custom stored state as its not reliable across browsers\n    const dropEffect = dndState.dropEffect;\n\n    let dropEffectEmitter:EventEmitter<DragEvent>;\n\n    switch( dropEffect ) {\n\n      case \"copy\":\n        dropEffectEmitter = this.dndCopied;\n        break;\n\n      case \"link\":\n        dropEffectEmitter = this.dndLinked;\n        break;\n\n      case \"move\":\n        dropEffectEmitter = this.dndMoved;\n        break;\n\n      default:\n        dropEffectEmitter = this.dndCanceled;\n        break;\n    }\n\n    dropEffectEmitter.emit( event );\n    this.dndEnd.emit( event );\n\n    // reset global state\n    endDrag();\n\n    this.isDragStarted = false;\n\n    this.renderer.removeClass( this.dragImage, this.dndDraggingClass );\n\n    // IE9 special hammering\n    window.setTimeout( () => {\n      this.renderer.removeClass( this.elementRef.nativeElement, this.dndDraggingSourceClass );\n    }, 0 );\n\n    event.stopPropagation();\n  }\n\n  registerDragHandle( handle:DndHandleDirective | undefined ) {\n\n    this.dndHandle = handle;\n  }\n\n  registerDragImage( elementRef:ElementRef | undefined ) {\n\n    this.dndDragImageElementRef = elementRef;\n  }\n\n  private determineDragImage():Element {\n\n    // evaluate custom drag image existence\n    if( typeof this.dndDragImageElementRef !== \"undefined\" ) {\n\n      return this.dndDragImageElementRef.nativeElement as Element;\n    }\n    else {\n\n      return this.elementRef.nativeElement;\n    }\n  }\n}\n","import {\n  AfterViewInit,\n  ContentChild,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnDestroy,\n  Output,\n  Renderer2\n} from \"@angular/core\";\nimport {\n  DndEvent,\n  DragDropData,\n  getDirectChildElement,\n  getDropData,\n  shouldPositionPlaceholderBeforeElement\n} from \"./dnd-utils\";\nimport { getDndType, getDropEffect, isExternalDrag, setDropEffect } from \"./dnd-state\";\nimport { DropEffect, EffectAllowed } from \"./dnd-types\";\n\nexport interface DndDropEvent {\n  event:DragEvent;\n  dropEffect:DropEffect;\n  isExternal:boolean;\n  data?:any;\n  index?:number;\n  type?:any;\n}\n\n@Directive( {\n  selector: \"[dndPlaceholderRef]\"\n} )\nexport class DndPlaceholderRefDirective {\n\n  constructor( public readonly elementRef:ElementRef ) {\n  }\n}\n\n@Directive( {\n  selector: \"[dndDropzone]\"\n} )\nexport class DndDropzoneDirective implements AfterViewInit, OnDestroy {\n\n  @Input()\n  dndDropzone?:string[] | \"\" = \"\";\n\n  @Input()\n  dndEffectAllowed:EffectAllowed = \"uninitialized\";\n\n  @Input()\n  dndAllowExternal:boolean = false;\n\n  @Input()\n  dndHorizontal:boolean = false;\n\n  @Input()\n  dndDragoverClass:string = \"dndDragover\";\n\n  @Input()\n  dndDropzoneDisabledClass = \"dndDropzoneDisabled\";\n\n  @Output()\n  readonly dndDragover:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\n\n  @Output()\n  readonly dndDrop:EventEmitter<DndDropEvent> = new EventEmitter<DndDropEvent>();\n\n  @ContentChild( DndPlaceholderRefDirective )\n  private readonly dndPlaceholderRef?:DndPlaceholderRefDirective;\n\n  private placeholder:Element | null = null;\n\n  private disabled:boolean = false;\n\n  private readonly dragEnterEventHandler:( event:DragEvent ) => void = ( event:DragEvent ) => this.onDragEnter( event );\n  private readonly dragOverEventHandler:( event:DragEvent ) => void = ( event:DragEvent ) => this.onDragOver( event );\n  private readonly dragLeaveEventHandler:( event:DragEvent ) => void = ( event:DragEvent ) => this.onDragLeave( event );\n\n  @Input()\n  set dndDisableIf( value:boolean ) {\n\n    this.disabled = !!value;\n\n    if( this.disabled ) {\n\n      this.renderer.addClass( this.elementRef.nativeElement, this.dndDropzoneDisabledClass );\n    }\n    else {\n\n      this.renderer.removeClass( this.elementRef.nativeElement, this.dndDropzoneDisabledClass );\n    }\n  }\n\n  @Input()\n  set dndDisableDropIf( value:boolean ) {\n    this.dndDisableIf = value;\n  }\n\n  constructor( private ngZone:NgZone,\n               private elementRef:ElementRef,\n               private renderer:Renderer2 ) {\n  }\n\n  ngAfterViewInit():void {\n\n    this.placeholder = this.tryGetPlaceholder();\n\n    this.removePlaceholderFromDOM();\n\n    this.ngZone.runOutsideAngular( () => {\n      this.elementRef.nativeElement.addEventListener( \"dragenter\", this.dragEnterEventHandler );\n      this.elementRef.nativeElement.addEventListener( \"dragover\", this.dragOverEventHandler );\n      this.elementRef.nativeElement.addEventListener( \"dragleave\", this.dragLeaveEventHandler );\n    } );\n  }\n\n  ngOnDestroy():void {\n    this.elementRef.nativeElement.removeEventListener( \"dragenter\", this.dragEnterEventHandler );\n    this.elementRef.nativeElement.removeEventListener( \"dragover\", this.dragOverEventHandler );\n    this.elementRef.nativeElement.removeEventListener( \"dragleave\", this.dragLeaveEventHandler );\n  }\n\n  onDragEnter( event:DndEvent ) {\n\n    // check if another dropzone is activated\n    if( event._dndDropzoneActive === true ) {\n\n      this.cleanupDragoverState();\n      return;\n    }\n\n    // set as active if the target element is inside this dropzone\n    if( typeof event._dndDropzoneActive === \"undefined\" ) {\n\n      const newTarget = document.elementFromPoint( event.clientX, event.clientY );\n\n      if( this.elementRef.nativeElement.contains( newTarget ) ) {\n\n        event._dndDropzoneActive = true;\n      }\n    }\n\n    // check if this drag event is allowed to drop on this dropzone\n    const type = getDndType( event );\n    if( this.isDropAllowed( type ) === false ) {\n\n      return;\n    }\n\n    // allow the dragenter\n    event.preventDefault();\n  }\n\n  onDragOver( event:DragEvent ) {\n    // With nested dropzones, we want to ignore this event if a child dropzone\n    // has already handled a dragover.  Historically, event.stopPropagation() was\n    // used to prevent this bubbling, but that prevents any dragovers outside the\n    // ngx-drag-drop component, and stops other use cases such as scrolling on drag.\n    // Instead, we can check if the event was already prevented by a child and bail early.\n    if( event.defaultPrevented ) {\n\n      return;\n    }\n\n    // check if this drag event is allowed to drop on this dropzone\n    const type = getDndType( event );\n    if( this.isDropAllowed( type ) === false ) {\n\n      return;\n    }\n\n    this.checkAndUpdatePlaceholderPosition( event );\n\n    const dropEffect = getDropEffect( event, this.dndEffectAllowed );\n\n    if( dropEffect === \"none\" ) {\n\n      this.cleanupDragoverState();\n      return;\n    }\n\n    // allow the dragover\n    event.preventDefault();\n\n    // set the drop effect\n    setDropEffect( event, dropEffect );\n\n    this.dndDragover.emit( event );\n\n    this.renderer.addClass( this.elementRef.nativeElement, this.dndDragoverClass );\n  }\n\n  @HostListener( \"drop\", [ \"$event\" ] )\n  onDrop( event:DragEvent ) {\n\n    try {\n\n      // check if this drag event is allowed to drop on this dropzone\n      const type = getDndType( event );\n      if( this.isDropAllowed( type ) === false ) {\n\n        return;\n      }\n\n      const data:DragDropData = getDropData( event, isExternalDrag() );\n\n      if( this.isDropAllowed( data.type ) === false ) {\n\n        return;\n      }\n\n      // signal custom drop handling\n      event.preventDefault();\n\n      const dropEffect = getDropEffect( event );\n\n      setDropEffect( event, dropEffect );\n\n      if( dropEffect === \"none\" ) {\n\n        return;\n      }\n\n      const dropIndex = this.getPlaceholderIndex();\n\n      // if for whatever reason the placeholder is not present in the DOM but it should be there\n      // we don't allow/emit the drop event since it breaks the contract\n      // seems to only happen if drag and drop is executed faster than the DOM updates\n      if( dropIndex === -1 ) {\n\n        return;\n      }\n\n      this.dndDrop.emit( {\n        event: event,\n        dropEffect: dropEffect,\n        isExternal: isExternalDrag(),\n        data: data.data,\n        index: dropIndex,\n        type: type,\n      } );\n\n      event.stopPropagation();\n\n    }\n    finally {\n\n      this.cleanupDragoverState();\n    }\n  }\n\n  onDragLeave( event:DndEvent ) {\n\n    // check if still inside this dropzone and not yet handled by another dropzone\n    if( typeof event._dndDropzoneActive === \"undefined\" ) {\n\n      const newTarget = document.elementFromPoint( event.clientX, event.clientY );\n\n      if( this.elementRef.nativeElement.contains( newTarget ) ) {\n\n        event._dndDropzoneActive = true;\n        return;\n      }\n    }\n\n    this.cleanupDragoverState();\n\n    // cleanup drop effect when leaving dropzone\n    setDropEffect( event, \"none\" );\n  }\n\n  private isDropAllowed( type?:string ):boolean {\n\n    // dropzone is disabled -> deny it\n    if( this.disabled === true ) {\n\n      return false;\n    }\n\n    // if drag did not start from our directive\n    // and external drag sources are not allowed -> deny it\n    if( isExternalDrag() === true\n      && this.dndAllowExternal === false ) {\n\n      return false;\n    }\n\n    // no filtering by types -> allow it\n    if( !this.dndDropzone ) {\n\n      return true;\n    }\n\n    // no type set -> allow it\n    if( !type ) {\n\n      return true;\n    }\n\n    if( Array.isArray( this.dndDropzone ) === false ) {\n\n      throw new Error( \"dndDropzone: bound value to [dndDropzone] must be an array!\" );\n    }\n\n    // if dropzone contains type -> allow it\n    return this.dndDropzone.indexOf( type ) !== -1;\n  }\n\n  private tryGetPlaceholder():Element | null {\n\n    if( typeof this.dndPlaceholderRef !== \"undefined\" ) {\n\n      return this.dndPlaceholderRef.elementRef.nativeElement as Element;\n    }\n\n    // TODO nasty workaround needed because if ng-container / template is used @ContentChild() or DI will fail because\n    // of wrong context see angular bug https://github.com/angular/angular/issues/13517\n    return this.elementRef.nativeElement.querySelector( \"[dndPlaceholderRef]\" );\n  }\n\n  private removePlaceholderFromDOM() {\n\n    if( this.placeholder !== null\n      && this.placeholder.parentNode !== null ) {\n      this.placeholder.parentNode.removeChild( this.placeholder );\n    }\n  }\n\n  private checkAndUpdatePlaceholderPosition( event:DragEvent ):void {\n\n    if( this.placeholder === null ) {\n\n      return;\n    }\n\n    // make sure the placeholder is in the DOM\n    if( this.placeholder.parentNode !== this.elementRef.nativeElement ) {\n\n      this.renderer.appendChild( this.elementRef.nativeElement, this.placeholder );\n    }\n\n    // update the position if the event originates from a child element of the dropzone\n    const directChild = getDirectChildElement( this.elementRef.nativeElement, event.target as Element );\n\n    // early exit if no direct child or direct child is placeholder\n    if( directChild === null\n      || directChild === this.placeholder ) {\n\n      return;\n    }\n\n    const positionPlaceholderBeforeDirectChild = shouldPositionPlaceholderBeforeElement( event, directChild, this.dndHorizontal );\n\n    if( positionPlaceholderBeforeDirectChild ) {\n\n      // do insert before only if necessary\n      if( directChild.previousSibling !== this.placeholder ) {\n\n        this.renderer.insertBefore( this.elementRef.nativeElement, this.placeholder, directChild );\n      }\n    }\n    else {\n\n      // do insert after only if necessary\n      if( directChild.nextSibling !== this.placeholder ) {\n\n        this.renderer.insertBefore( this.elementRef.nativeElement, this.placeholder, directChild.nextSibling );\n      }\n    }\n  }\n\n  private getPlaceholderIndex():number | undefined {\n\n    if( this.placeholder === null ) {\n\n      return undefined;\n    }\n\n    const element = this.elementRef.nativeElement as HTMLElement;\n\n    return Array.prototype.indexOf.call( element.children, this.placeholder );\n  }\n\n  private cleanupDragoverState() {\n\n    this.renderer.removeClass( this.elementRef.nativeElement, this.dndDragoverClass );\n\n    this.removePlaceholderFromDOM();\n  }\n}\n","import { Directive, HostBinding, HostListener } from \"@angular/core\";\nimport { DndEvent } from \"./dnd-utils\";\nimport { DndDraggableDirective } from \"./dnd-draggable.directive\";\n\n@Directive( {\n  selector: \"[dndHandle]\"\n} )\nexport class DndHandleDirective {\n\n  @HostBinding( \"attr.draggable\" )\n  draggable = true;\n\n  constructor( parent:DndDraggableDirective ) {\n\n    parent.registerDragHandle( this );\n  }\n\n  @HostListener( \"dragstart\", [ \"$event\" ] )\n  @HostListener( \"dragend\", [ \"$event\" ] )\n  onDragEvent( event:DndEvent ) {\n\n    event._dndUsingHandle = true;\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { DndDraggableDirective, DndDragImageRefDirective } from \"./dnd-draggable.directive\";\nimport { DndDropzoneDirective, DndPlaceholderRefDirective } from \"./dnd-dropzone.directive\";\nimport { DndHandleDirective } from \"./dnd-handle.directive\";\n\n@NgModule( {\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    DndDraggableDirective,\n    DndDropzoneDirective,\n    DndHandleDirective,\n    DndPlaceholderRefDirective,\n    DndDragImageRefDirective\n  ],\n  exports: [\n    DndDraggableDirective,\n    DndDropzoneDirective,\n    DndHandleDirective,\n    DndPlaceholderRefDirective,\n    DndDragImageRefDirective\n  ]\n} )\nexport class DndModule {\n}\n","/*\n * Public API Surface of dnd\n */\n\nexport * from \"./lib/dnd-draggable.directive\";\nexport * from \"./lib/dnd-dropzone.directive\";\nexport * from \"./lib/dnd-handle.directive\";\nexport * from \"./lib/dnd-types\";\nexport { DndDragImageOffsetFunction } from \"./lib/dnd-utils\";\nexport * from \"./lib/dnd.module\";\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.DndDraggableDirective"],"mappings":"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"}